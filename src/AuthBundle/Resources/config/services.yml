services:
    AuthBundle\Security\SHA1PasswordEncoder: ~
    auth.ldap.password_encoder:
        alias: AuthBundle\Security\SHA1PasswordEncoder
        public: true

    AuthBundle\Security\AdldapAuthenticator:
        arguments: [ "@form.factory", "@doctrine.orm.entity_manager", "@router", "@security.password_encoder","@auth.active_directory", "@auth.bis_dir"]
        autowire: true
        public: true

    AuthBundle\Doctrine\HashPasswordListener:
        autowire: true
        tags:
            - { name: doctrine.event_subscriber}
        public: true
    auth.doctrine.hash_password_listener:
        alias: AuthBundle\Doctrine\HashPasswordListener
        public: true


    AuthBundle\Service\ActiveDirectory:
        arguments: [ "@doctrine.orm.bis_entity_manager", '%domain_controllers%', '%base_dn%', '%admin_username%', '%admin_password%']
        public: true
    auth.active_directory:
        alias: AuthBundle\Service\ActiveDirectory
        public: true

    AuthBundle\Service\ActiveDirectoryNotification:
        autowire: true
        arguments:
            $fromAddress: '%notification_from%'
            $toAddress: '%notification_to%'
        public: true

    AuthBundle\Service\BisDir:
        arguments: [ '@auth.ldap.password_encoder','%bis_dir_hosts%', '%bis_dir_base_dn%', '%bis_dir_admin_username%', '%bis_dir_admin_password%']
        public: true
    auth.bis_dir:
        alias: AuthBundle\Service\BisDir
        public: true
